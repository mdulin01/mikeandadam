rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Main app data — only Mike and Adam (authenticated owners)
    match /tripData/{docId} {
      allow read, write: if request.auth != null &&
        request.auth.token.email in ['mdulin@gmail.com', 'adamjosephbritten@gmail.com'];
    }

    // Individual event docs — guests need read access (for event page)
    // and write access (for RSVP, collaborative lists, photo uploads)
    match /events/{eventId} {
      allow read, write: if true;
    }

    // FCM push notification tokens — authenticated owners only
    match /fcmTokens/{tokenId} {
      allow read, write: if request.auth != null &&
        request.auth.token.email in ['mdulin@gmail.com', 'adamjosephbritten@gmail.com'];
    }
  }
}
